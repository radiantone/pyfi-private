!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).loadPyodide={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function t(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var r={exports:{}},o={exports:{}};!function(e,t){e.exports=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}var o=["isConstructor","isEval","isNative","isToplevel"],n=["columnNumber","lineNumber"],i=["fileName","functionName","source"],a=["args"],s=["evalOrigin"],l=o.concat(n,i,a,s);function c(e){if(e)for(var r=0;r<l.length;r++)void 0!==e[l[r]]&&this["set"+t(l[r])](e[l[r]])}c.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof c)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new c(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",o=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:o?o+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}},c.fromString=function(e){var t=e.indexOf("("),r=e.lastIndexOf(")"),o=e.substring(0,t),n=e.substring(t+1,r).split(","),i=e.substring(r+1);if(0===i.indexOf("@"))var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i,""),s=a[1],l=a[2],u=a[3];return new c({functionName:o,args:n||void 0,fileName:s,lineNumber:l||void 0,columnNumber:u||void 0})};for(var u=0;u<o.length;u++)c.prototype["get"+t(o[u])]=r(o[u]),c.prototype["set"+t(o[u])]=function(e){return function(t){this[e]=Boolean(t)}}(o[u]);for(var f=0;f<n.length;f++)c.prototype["get"+t(n[f])]=r(n[f]),c.prototype["set"+t(n[f])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(n[f]);for(var d=0;d<i.length;d++)c.prototype["get"+t(i[d])]=r(i[d]),c.prototype["set"+t(i[d])]=function(e){return function(t){this[e]=String(t)}}(i[d]);return c}()}(o),function(e,t){var r,n,i,a;e.exports=(r=o.exports,n=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,a=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(i)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=o?t.replace(o[0],""):t).split(/\s+/).slice(1),i=this.extractLocation(o?o[1]:n.pop()),a=n.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0];return new r({functionName:a,fileName:s,lineNumber:i[1],columnNumber:i[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(a)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new r({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=e.match(t),n=o&&o[1]?o[1]:void 0,i=this.extractLocation(e.replace(t,""));return new r({functionName:n,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,o=e.message.split("\n"),n=[],i=2,a=o.length;i<a;i+=2){var s=t.exec(o[i]);s&&n.push(new r({fileName:s[2],lineNumber:s[1],source:o[i]}))}return n},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=e.stacktrace.split("\n"),n=[],i=0,a=o.length;i<a;i+=2){var s=t.exec(o[i]);s&&n.push(new r({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:o[i]}))}return n},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(n)&&!e.match(/^Error created at/)}),this).map((function(e){var t,o=e.split("@"),n=this.extractLocation(o.pop()),i=o.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i.match(/\(([^)]*)\)/)&&(t=i.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new r({functionName:a,args:s,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})}),this)}})}(r);var n=r.exports;let i={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preloadedWasm:{},preRun:[]},a={};i.API=a;let s={};i.hiwire=s;let l={};function c(e,t,r){t&&(i.print=t),r&&(i.printErr=r),e&&i.preRun.push((function(){i.FS.init(function(e){const t=new TextEncoder;let r=new Uint8Array(0),o=-1;function n(){try{if(-1===o){let n=e();if(null==n)return null;if("string"!=typeof n)throw new TypeError(`Expected stdin to return string, null, or undefined, got type ${typeof n}.`);n.endsWith("\n")||(n+="\n"),r=t.encode(n),o=0}if(o<r.length){let e=r[o];return o++,e}return o=-1,null}catch(n){throw console.error("Error thrown in stdin:"),console.error(n),n}}return n}(e),null,null)}))}a.tests=l;const u="undefined"!=typeof process&&process.release&&"node"===process.release.name&&void 0===process.browser;let f,d,p,y,h,_;if(h=u?function(e,r){return t(this,void 0,void 0,(function*(){if(r.includes("://")){let e=yield d(r);if(!e.ok)throw new Error(`Failed to load '${r}': request failed.`);return yield e.arrayBuffer()}{const t=yield y.readFile(`${e}${r}`);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}}))}:function(e,r){return t(this,void 0,void 0,(function*(){const t=new URL(e,location),o=new URL(r,t);let n=yield fetch(o);if(!n.ok)throw new Error(`Failed to load '${o}': request failed.`);return new Uint8Array(yield n.arrayBuffer())}))},globalThis.document)_=e=>t(void 0,void 0,void 0,(function*(){return yield import(e)}));else if(globalThis.importScripts)_=e=>t(void 0,void 0,void 0,(function*(){try{globalThis.importScripts(e)}catch(t){if(!(t instanceof TypeError))throw t;yield import(e)}}));else{if(!u)throw new Error("Cannot determine runtime environment");_=function(e){return t(this,void 0,void 0,(function*(){e.includes("://")?p.runInThisContext(yield(yield d(e)).text()):yield import(f.resolve(e))}))}}function g(e){return!!e&&void 0!==e.$$&&"PyProxy"===e.$$.type}a.isPyProxy=g,globalThis.FinalizationRegistry?i.finalizationRegistry=new FinalizationRegistry((([e,t])=>{t.leaked=!0,x(t);try{i._Py_DecRef(e)}catch(r){a.fatal_error(r)}})):i.finalizationRegistry={register(){},unregister(){}};let m,v,w=new Map;function b(e){let t=e.$$.ptr;if(0===t)throw new Error(e.$$.destroyed_msg);return t}i.pyproxy_alloc_map=w,i.enable_pyproxy_allocation_tracing=function(){m=function(e){w.set(e,Error().stack)},v=function(e){w.delete(e)}},i.disable_pyproxy_allocation_tracing=function(){m=function(e){},v=function(e){}},i.disable_pyproxy_allocation_tracing(),i.pyproxy_new=function(e,t){let r,o=i._pyproxy_getflags(e),n=i.getPyProxyClass(o);256&o?(r=Reflect.construct(Function,[],n),delete r.length,delete r.name,r.prototype=void 0):r=Object.create(n.prototype),t||(t={cacheId:s.new_value(new Map),refcnt:0}),t.refcnt++,Object.defineProperty(r,"$$",{value:{ptr:e,type:"PyProxy",cache:t}}),i._Py_IncRef(e);let a=new Proxy(r,N);return m(a),i.finalizationRegistry.register(a,[e,t],a),a};let P=new Map;function x(e){if(e&&(e.refcnt--,0===e.refcnt)){let t=s.pop_value(e.cacheId);for(let r of t.values()){const t=s.pop_value(r);e.leaked||i.pyproxy_destroy(t,"This borrowed attribute proxy was automatically destroyed in the process of destroying the proxy it was borrowed from. Try using the 'copy' method.")}}}i.getPyProxyClass=function(e){const t=[[1,j],[2,k],[4,O],[8,E],[16,S],[32,T],[64,A],[128,L],[256,F]];let r=P.get(e);if(r)return r;let o={};for(let[a,s]of t)e&a&&Object.assign(o,Object.getOwnPropertyDescriptors(s.prototype));o.constructor=Object.getOwnPropertyDescriptor($.prototype,"constructor"),Object.assign(o,Object.getOwnPropertyDescriptors({$$flags:e}));let n=Object.create($.prototype,o);function i(){}return i.prototype=n,P.set(e,i),i},i.PyProxy_getPtr=b,i.pyproxy_destroy=function(e,t){if(0===e.$$.ptr)return;let r=b(e);i.finalizationRegistry.unregister(e),t=t||"Object has already been destroyed";let o,n=e.type;try{o=e.toString()}catch(s){if(s.pyodide_fatal_error)throw s}e.$$.ptr=0,t+=`\nThe object was of type "${n}" and `,t+=o?`had repr "${o}"`:"an error was raised when trying to generate its repr",e.$$.destroyed_msg=t,x(e.$$.cache);try{i._Py_DecRef(r),v(e)}catch(s){a.fatal_error(s)}},i.callPyObjectKwargs=function(e,...t){let r=t.pop(),o=t.length,n=Object.keys(r),l=Object.values(r),c=n.length;t.push(...l);let u,f=s.new_value(t),d=s.new_value(n);try{u=i.__pyproxy_apply(e,f,o,d,c)}catch(y){a.fatal_error(y)}finally{s.decref(f),s.decref(d)}0===u&&i._pythonexc2js();let p=s.pop_value(u);return p&&"coroutine"===p.type&&p._ensure_future&&p._ensure_future(),p},i.callPyObject=function(e,...t){return i.callPyObjectKwargs(e,...t,{})};class ${constructor(){throw new TypeError("PyProxy is not a constructor")}get[Symbol.toStringTag](){return"PyProxy"}get type(){let e=b(this);return s.pop_value(i.__pyproxy_type(e))}toString(){let e,t=b(this);try{e=i.__pyproxy_repr(t)}catch(r){a.fatal_error(r)}return 0===e&&i._pythonexc2js(),s.pop_value(e)}destroy(e){i.pyproxy_destroy(this,e)}copy(){let e=b(this);return i.pyproxy_new(e,this.$$.cache)}toJs({depth:e=-1,pyproxies:t,create_pyproxies:r=!0,dict_converter:o,default_converter:n}={}){let l,c,u=b(this),f=0,d=0;c=r?t?s.new_value(t):s.new_value([]):0,o&&(f=s.new_value(o)),n&&(d=s.new_value(n));try{l=i._python2js_custom(u,e,c,f,d)}catch(p){a.fatal_error(p)}finally{s.decref(c),s.decref(f),s.decref(d)}return 0===l&&i._pythonexc2js(),s.pop_value(l)}supportsLength(){return!!(1&this.$$flags)}supportsGet(){return!!(2&this.$$flags)}supportsSet(){return!!(4&this.$$flags)}supportsHas(){return!!(8&this.$$flags)}isIterable(){return!!(48&this.$$flags)}isIterator(){return!!(32&this.$$flags)}isAwaitable(){return!!(64&this.$$flags)}isBuffer(){return!!(128&this.$$flags)}isCallable(){return!!(256&this.$$flags)}}class j{get length(){let e,t=b(this);try{e=i._PyObject_Size(t)}catch(r){a.fatal_error(r)}return-1===e&&i._pythonexc2js(),e}}class k{get(e){let t,r=b(this),o=s.new_value(e);try{t=i.__pyproxy_getitem(r,o)}catch(n){a.fatal_error(n)}finally{s.decref(o)}if(0===t){if(!i._PyErr_Occurred())return;i._pythonexc2js()}return s.pop_value(t)}}class O{set(e,t){let r,o=b(this),n=s.new_value(e),l=s.new_value(t);try{r=i.__pyproxy_setitem(o,n,l)}catch(c){a.fatal_error(c)}finally{s.decref(n),s.decref(l)}-1===r&&i._pythonexc2js()}delete(e){let t,r=b(this),o=s.new_value(e);try{t=i.__pyproxy_delitem(r,o)}catch(n){a.fatal_error(n)}finally{s.decref(o)}-1===t&&i._pythonexc2js()}}class E{has(e){let t,r=b(this),o=s.new_value(e);try{t=i.__pyproxy_contains(r,o)}catch(n){a.fatal_error(n)}finally{s.decref(o)}return-1===t&&i._pythonexc2js(),1===t}}class S{[Symbol.iterator](){let e,t=b(this),r={};try{e=i._PyObject_GetIter(t)}catch(n){a.fatal_error(n)}0===e&&i._pythonexc2js();let o=function*(e,t){try{let r;for(;r=i.__pyproxy_iter_next(e);)yield s.pop_value(r)}catch(n){a.fatal_error(n)}finally{i.finalizationRegistry.unregister(t),i._Py_DecRef(e)}i._PyErr_Occurred()&&i._pythonexc2js()}(e,r);return i.finalizationRegistry.register(o,[e,void 0],r),o}}class T{[Symbol.iterator](){return this}next(e){let t,r,o=s.new_value(e),n=i.stackSave(),l=i.stackAlloc(4);try{t=i.__pyproxyGen_Send(b(this),o,l)}catch(u){a.fatal_error(u)}finally{s.decref(o)}let c=i.HEAPU32[0+(l>>2)];return i.stackRestore(n),-1===t&&i._pythonexc2js(),r=0===t,{done:r,value:s.pop_value(c)}}}let N={isExtensible:()=>!0,has:(e,t)=>!!Reflect.has(e,t)||"symbol"!=typeof t&&(t.startsWith("$")&&(t=t.slice(1)),function(e,t){let r,o=b(e),n=s.new_value(t);try{r=i.__pyproxy_hasattr(o,n)}catch(l){a.fatal_error(l)}finally{s.decref(n)}return-1===r&&i._pythonexc2js(),0!==r}(e,t)),get(e,t){if(t in e||"symbol"==typeof t)return Reflect.get(e,t);t.startsWith("$")&&(t=t.slice(1));let r=function(e,t){let r,o=b(e),n=s.new_value(t),l=e.$$.cache.cacheId;try{r=i.__pyproxy_getattr(o,n,l)}catch(c){a.fatal_error(c)}finally{s.decref(n)}return 0===r&&i._PyErr_Occurred()&&i._pythonexc2js(),r}(e,t);return 0!==r?s.pop_value(r):void 0},set(e,t,r){let o=Object.getOwnPropertyDescriptor(e,t);if(o&&!o.writable)throw new TypeError(`Cannot set read only field '${t}'`);return"symbol"==typeof t?Reflect.set(e,t,r):(t.startsWith("$")&&(t=t.slice(1)),function(e,t,r){let o,n=b(e),l=s.new_value(t),c=s.new_value(r);try{o=i.__pyproxy_setattr(n,l,c)}catch(u){a.fatal_error(u)}finally{s.decref(l),s.decref(c)}-1===o&&i._pythonexc2js()}(e,t,r),!0)},deleteProperty(e,t){let r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.writable)throw new TypeError(`Cannot delete read only field '${t}'`);return"symbol"==typeof t?Reflect.deleteProperty(e,t):(t.startsWith("$")&&(t=t.slice(1)),function(e,t){let r,o=b(e),n=s.new_value(t);try{r=i.__pyproxy_delattr(o,n)}catch(l){a.fatal_error(l)}finally{s.decref(n)}-1===r&&i._pythonexc2js()}(e,t),!r||!!r.configurable)},ownKeys(e){let t,r=b(e);try{t=i.__pyproxy_ownKeys(r)}catch(n){a.fatal_error(n)}0===t&&i._pythonexc2js();let o=s.pop_value(t);return o.push(...Reflect.ownKeys(e)),o},apply:(e,t,r)=>e.apply(t,r)};class A{_ensure_future(){if(this.$$.promise)return this.$$.promise;let e,t,r,o=b(this),n=new Promise(((r,o)=>{e=r,t=o})),l=s.new_value(e),c=s.new_value(t);try{r=i.__pyproxy_ensure_future(o,l,c)}catch(u){a.fatal_error(u)}finally{s.decref(c),s.decref(l)}return-1===r&&i._pythonexc2js(),this.$$.promise=n,this.destroy(),n}then(e,t){return this._ensure_future().then(e,t)}catch(e){return this._ensure_future().catch(e)}finally(e){return this._ensure_future().finally(e)}}class F{apply(e,t){return i.callPyObject(b(this),...t)}call(e,...t){return i.callPyObject(b(this),...t)}callKwargs(...e){if(0===e.length)throw new TypeError("callKwargs requires at least one argument (the key word argument object)");let t=e[e.length-1];if(void 0!==t.constructor&&"Object"!==t.constructor.name)throw new TypeError("kwargs argument is not an object");return i.callPyObjectKwargs(b(this),...e)}}F.prototype.prototype=Function.prototype;let R,I=new Map([["i8",Int8Array],["u8",Uint8Array],["u8clamped",Uint8ClampedArray],["i16",Int16Array],["u16",Uint16Array],["i32",Int32Array],["u32",Uint32Array],["i32",Int32Array],["u32",Uint32Array],["i64",globalThis.BigInt64Array],["u64",globalThis.BigUint64Array],["f32",Float32Array],["f64",Float64Array],["dataview",DataView]]);class L{getBuffer(e){let t;if(e&&(t=I.get(e),void 0===t))throw new Error(`Unknown type ${e}`);let r,o=i.HEAPU32,n=i.stackSave(),l=i.stackAlloc(o[0+(i._buffer_struct_size>>2)]),c=b(this);try{r=i.__pyproxy_get_buffer(l,c)}catch($){a.fatal_error($)}-1===r&&i._pythonexc2js();let u=o[0+(l>>2)],f=o[1+(l>>2)],d=o[2+(l>>2)],p=!!o[3+(l>>2)],y=o[4+(l>>2)],h=o[5+(l>>2)],_=s.pop_value(o[6+(l>>2)]),g=s.pop_value(o[7+(l>>2)]),m=o[8+(l>>2)],v=!!o[9+(l>>2)],w=!!o[10+(l>>2)],P=i.UTF8ToString(y);i.stackRestore(n);let x=!1;try{let e=!1;void 0===t&&([t,e]=i.processBufferFormatString(P," In this case, you can pass an explicit type argument."));let r=parseInt(t.name.replace(/[^0-9]/g,""))/8||1;if(e&&r>1)throw new Error("Javascript has no native support for big endian buffers. In this case, you can pass an explicit type argument. For instance, `getBuffer('dataview')` will return a `DataView`which has native support for reading big endian data. Alternatively, toJs will automatically convert the buffer to little endian.");let n=d-f;if(0!==n&&(u%r!=0||f%r!=0||d%r!=0))throw new Error(`Buffer does not have valid alignment for a ${t.name}`);let s,l=n/r,c=(u-f)/r;s=0===n?new t:new t(o.buffer,f,l);for(let t of g.keys())g[t]/=r;return x=!0,Object.create(U.prototype,Object.getOwnPropertyDescriptors({offset:c,readonly:p,format:P,itemsize:h,ndim:_.length,nbytes:n,shape:_,strides:g,data:s,c_contiguous:v,f_contiguous:w,_view_ptr:m,_released:!1}))}finally{if(!x)try{i._PyBuffer_Release(m),i._PyMem_Free(m)}catch($){a.fatal_error($)}}}}class U{constructor(){throw new TypeError("PyBuffer is not a constructor")}release(){if(!this._released){try{i._PyBuffer_Release(this._view_ptr),i._PyMem_Free(this._view_ptr)}catch(e){a.fatal_error(e)}this._released=!0,this.data=null}}}const D=/^.*?([^\/]*)\.whl$/;function C(e){let t=D.exec(e);if(t)return t[1].toLowerCase().split("-").slice(0,-4).join("-")}function M(e,t,r){if(e=e.toLowerCase(),t.has(e))return;const o=a.packages[e];if(!o)throw new Error(`No known package with name '${e}'`);if(o.shared_library?r.set(e,"default channel"):t.set(e,"default channel"),void 0===V[e])for(let n of o.depends)M(n,t,r)}function B(e,r){return t(this,void 0,void 0,(function*(){let t;if("default channel"===r){if(!(e in a.packages))throw new Error(`Internal error: no entry for package named ${e}`);t=a.packages[e].file_name}else t=r;return yield h(R,t)}))}function z(e,r){return t(this,void 0,void 0,(function*(){let t=a.packages[e];t||(t={file_name:".whl",install_dir:"site",shared_library:!1,depends:[],imports:[]});const o=t.file_name,n=a.package_loader.unpack_buffer.callKwargs({buffer:r,filename:o,target:t.install_dir,calculate_dynlibs:!0});for(const e of n)yield K(e,t.shared_library);V[e]=t}))}function W(){let e=Promise.resolve();return function(){return t(this,void 0,void 0,(function*(){const t=e;let r;return e=new Promise((e=>r=e)),yield t,r}))}}const J=W();function K(e,r){return t(this,void 0,void 0,(function*(){let t;t=i.FS.lookupPath(e).node.mount.type==i.FS.filesystems.MEMFS?i.FS.filesystems.MEMFS.getFileDataAsTypedArray(i.FS.lookupPath(e).node):i.FS.readFile(e);const o=yield J();try{const n=yield i.loadWebAssemblyModule(t,{loadAsync:!0,nodelete:!0,allowUndefined:!0});i.preloadedWasm[e]=n,i.preloadedWasm[e.split("/").pop()]=n,r&&i.loadDynamicLibrary(e,{global:!0,nodelete:!0})}catch(n){if(n.message.includes("need to see wasm magic number"))return void console.warn(`Failed to load dynlib ${e}. We probably just tried to load a linux .so file or something.`);throw n}finally{o()}}))}l.loadDynlib=K;const H=W();function G(e,r,o){return t(this,void 0,void 0,(function*(){r=r||console.log,o=o||console.error,g(e)&&(e=e.toJs()),Array.isArray(e)||(e=[e]);const[n,s]=function(e,t){const r=new Map,o=new Map;for(let n of e){const e=C(n);void 0!==e?r.has(e)&&r.get(e)!==n?t(`Loading same package ${e} from ${n} and ${r.get(e)}`):r.set(e,n):M(n,r,o)}return[r,o]}(e,o);for(const[e,t]of[...n,...s]){const i=V[e];void 0!==i&&(n.delete(e),s.delete(e),i===t||"default channel"===t?r(`${e} already loaded from ${i}`):o(`URI mismatch, attempting to load package ${e} from ${t} while it is already loaded from ${i}. To override a dependency, load the custom package first.`))}if(0===n.size&&0===s.size)return void r("No new packages to load");const l=[...n.keys(),...s.keys()].join(", "),c=yield H();try{r(`Loading ${l}`);const e={},o={};for(const[t,r]of s)V[t]?s.delete(t):e[t]=B(t,r);for(const[t,r]of n)V[t]?n.delete(t):o[t]=B(t,r);const u=[],f={},d={},p={};for(const[r,n]of s)d[r]=e[r].then((e=>t(this,void 0,void 0,(function*(){yield z(r,e),u.push(r),V[r]=n})))).catch((e=>{console.warn(e),f[r]=e}));yield Promise.all(Object.values(d));for(const[r,i]of n)p[r]=o[r].then((e=>t(this,void 0,void 0,(function*(){yield z(r,e),u.push(r),V[r]=i})))).catch((e=>{console.warn(e),f[r]=e}));if(yield Promise.all(Object.values(p)),i.reportUndefinedSymbols(),u.length>0){const e=u.join(", ");r(`Loaded ${e}`)}if(Object.keys(f).length>0){const e=Object.keys(f).join(", ");r(`Failed to load ${e}`);for(const[t,r]of Object.entries(f))console.warn(`The following error occurred while loading ${t}:`),console.error(r)}a.importlib.invalidate_caches()}finally{c()}}))}let V={};function q(e){if("string"==typeof e)e=new Error(e);else if("object"!=typeof e||null===e||"string"!=typeof e.stack||"string"!=typeof e.message){let t=`A value of type ${typeof e} with tag ${Object.prototype.toString.call(e)} was thrown as an error!`;try{t+=`\nString interpolation of the thrown value gives """${e}""".`}catch(e){t+="\nString interpolation of the thrown value fails."}try{t+=`\nThe thrown value's toString method returns """${e.toString()}""".`}catch(e){t+="\nThe thrown value's toString method fails."}e=new Error(t)}return e}a.dump_traceback=function(){i.__Py_DumpTraceback(1,i._PyGILState_GetThisThreadState())};let Q=!1;a.fatal_error=function(e){if(!e||!e.pyodide_fatal_error){if(Q)return console.error("Recursive call to fatal_error. Inner error was:"),void console.error(e);(e="number"==typeof e?Y(e):q(e)).pyodide_fatal_error=!0,Q=!0,console.error("Pyodide has suffered a fatal error. Please report this to the Pyodide maintainers."),console.error("The cause of the fatal error was:"),a.inTestHoist?(console.error(e.toString()),console.error(e.stack)):console.error(e);try{a.dump_traceback();for(let e of Object.keys(a.public_api))e.startsWith("_")||"version"===e||Object.defineProperty(a.public_api,e,{enumerable:!0,configurable:!0,get:()=>{throw new Error("Pyodide already fatally failed and can no longer be used.")}});a.on_fatal&&a.on_fatal(e)}catch(t){console.error("Another error occurred while handling the fatal error:"),console.error(t)}throw e}};class X extends Error{constructor(e,t){super(t),this.ty=e}}function Y(e){const[t,r,o]=function(e){const t=i._exc_type(),r=new i.ExceptionInfo(e).get_type(),o=i.stackSave(),n=i.stackAlloc(4);i.HEAP32[n/4]=e;const a=i.demangle(i.UTF8ToString(i._exc_typename(r))),s=!!i.___cxa_can_catch(t,r,n),l=i.HEAP32[n/4];return i.stackRestore(o),[a,s,l]}(e);let n;if(r){const e=i._exc_what(o);n=i.UTF8ToString(e)}else n=`The exception is an object of type ${t} at address ${e} which does not inherit from std::exception`;return new X(t,n)}function Z(e){const t=e.fileName||"";if(t.includes("pyodide.asm"))return!0;if(t.includes("wasm-function"))return!0;if(!t.includes("pyodide.js"))return!1;let r=e.functionName||"";return r.startsWith("Object.")&&(r=r.slice("Object.".length)),!(r in a.public_api)||"PythonError"===r||(e.functionName=r,!1)}Object.defineProperty(X.prototype,"name",{get(){return`${this.constructor.name} ${this.ty}`}}),l.convertCppException=Y,i.handle_js_error=function(e){if(e&&e.pyodide_fatal_error)throw e;if(e instanceof i._PropagatePythonError)return;let t,r,o=!1;e instanceof a.PythonError&&(o=i._restore_sys_last_exception(e.__error_address));try{t=n.parse(e)}catch(l){r=!0}if(r&&(e=q(e)),!o){let t=s.new_value(e),r=i._JsProxy_create(t);i._set_error(r),i._Py_DecRef(r),s.decref(t)}if(!r){if(function(e){if(!Z(e))return!1;const t=e.functionName;return"PythonError"===t||"new_error"===t}(t[0]))for(;Z(t[0]);)t.shift();for(const e of t){if(Z(e))break;const t=i.stringToNewUTF8(e.functionName||"???"),r=i.stringToNewUTF8(e.fileName||"???.js");i.__PyTraceback_Add(t,r,e.lineNumber),i._free(t),i._free(r)}}};class ee extends Error{constructor(e,t){const r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,super(e),Error.stackTraceLimit=r,this.__error_address=t}}Object.defineProperty(ee.prototype,"name",{value:ee.name}),a.PythonError=ee;class te extends Error{constructor(){a.fail_test=!0,super("If you are seeing this message, an internal Pyodide error has occurred. Please report it to the Pyodide maintainers.")}}Object.defineProperty(te.prototype,"name",{value:te.name}),i._PropagatePythonError=te;let re=!1;function oe(e,t={}){return a.isPyProxy(t)&&(t={globals:t},re||(console.warn("Passing a PyProxy as the second argument to runPython is deprecated and will be removed in v0.21. Use 'runPython(code, {globals : some_dict})' instead."),re=!0)),t.globals||(t.globals=a.globals),a.pyodide_py.eval_code(e,t.globals)}function ne(e,r,o){return t(this,void 0,void 0,(function*(){let t,n=a.pyodide_py.find_imports(e);try{t=n.toJs()}finally{n.destroy()}if(0===t.length)return;let i=a._import_name_to_package_name,s=new Set;for(let e of t)i.has(e)&&s.add(i.get(e));s.size&&(yield G(Array.from(s),r,o))}))}function ie(e,r={}){return t(this,void 0,void 0,(function*(){return a.isPyProxy(r)&&(r={globals:r},re||(console.warn("Passing a PyProxy as the second argument to runPythonAsync is deprecated and will be removed in v0.21. Use 'runPythonAsync(code, {globals : some_dict})' instead."),re=!0)),r.globals||(r.globals=a.globals),yield a.pyodide_py.eval_code_async(e,r.globals)}))}function ae(e,t){a.pyodide_py.register_js_module(e,t)}function se(e){a._Comlink=e}function le(e){a.pyodide_py.unregister_js_module(e)}function ce(e,{depth:t,defaultConverter:r}={depth:-1}){switch(typeof e){case"string":case"number":case"boolean":case"bigint":case"undefined":return e}if(!e||a.isPyProxy(e))return e;let o=0,n=0,l=0;try{o=s.new_value(e);try{n=i.js2python_convert(o,{depth:t,defaultConverter:r})}catch(c){throw c instanceof i._PropagatePythonError&&i._pythonexc2js(),c}if(i._JsProxy_Check(n))return e;l=i._python2js(n),0===l&&i._pythonexc2js()}finally{s.decref(o),i._Py_DecRef(n)}return s.pop_value(l)}function ue(e){return a.importlib.import_module(e)}a.runPython=oe,a.runPythonAsync=ie;let fe,de,pe=!1;function ye(e,t,r={}){"string"==typeof r&&(pe||(console.warn("Passing a string as the third argument to unpackArchive is deprecated and will be removed in v0.21. Instead use { extract_dir : 'some_path' }"),pe=!0),r={extractDir:r});let o=r.extractDir;a.package_loader.unpack_buffer.callKwargs({buffer:e,format:t,extract_dir:o})}function he(e){i.HEAP8[i._Py_EMSCRIPTEN_SIGNAL_HANDLING]=!!e,i.Py_EmscriptenSignalBuffer=e}function _e(){i.__PyErr_CheckSignals()&&i._pythonexc2js()}function ge(){fe=i.FS;let e={globals:void 0,FS:fe,pyodide_py:void 0,version:"",loadPackage:G,loadPackagesFromImports:ne,loadedPackages:V,isPyProxy:g,runPython:oe,runPythonAsync:ie,registerJsModule:ae,unregisterJsModule:le,setInterruptBuffer:he,checkInterrupt:_e,toPy:ce,pyimport:ue,unpackArchive:ye,registerComlink:se,PythonError:ee,PyBuffer:U,_module:i,_api:a};return a.public_api=e,e}function me(e){de=a._pyodide._base.eval_code("{}"),a.importlib=a.runPythonInternal("import importlib; importlib");let t=a.importlib.import_module;a.sys=t("sys"),a.sys.path.insert(0,e.homedir);let r=a.runPythonInternal("import __main__; __main__.__dict__"),o=a.runPythonInternal("import builtins; builtins.__dict__");var n;a.globals=(n=o,new Proxy(r,{get:(e,t)=>"get"===t?t=>{let r=e.get(t);return void 0===r&&(r=n.get(t)),r}:"has"===t?t=>e.has(t)||n.has(t):Reflect.get(e,t)}));let i=a._pyodide._importhook;i.register_js_finder(),i.register_js_module("js",e.jsglobals);let s=ge();return i.register_js_module("pyodide_js",s),a.pyodide_py=t("pyodide"),a.package_loader=t("pyodide._package_loader"),a.version=a.pyodide_py.__version__,s.pyodide_py=a.pyodide_py,s.version=a.version,s.globals=a.globals,s}function ve(e={}){return t(this,void 0,void 0,(function*(){if(ve.inProgress)throw new Error("Pyodide is already loading.");e.indexURL||(e.indexURL=function(){let e;try{throw new Error}catch(r){e=r}const t=n.parse(e)[0].fileName;return t.slice(0,t.lastIndexOf("/"))}()),ve.inProgress=!0;const r={fullStdLib:!0,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,homedir:"/home/pyodide"};let o=Object.assign(r,e);o.indexURL.endsWith("/")||(o.indexURL+="/"),yield function(){return t(this,void 0,void 0,(function*(){u&&(f=(yield import("path")).default,y=yield import("fs/promises"),d=(yield import("node-fetch")).default,p=(yield import("vm")).default)}))}();let s=function(e){return t(this,void 0,void 0,(function*(){let t;if(R=e,u){const r=yield y.readFile(`${e}packages.json`);t=JSON.parse(r)}else{let r=yield fetch(`${e}packages.json`);t=yield r.json()}if(!t.packages)throw new Error("Loaded packages.json does not contain the expected key 'packages'.");a.packages=t.packages,a._import_name_to_package_name=new Map;for(let e of Object.keys(a.packages))for(let t of a.packages[e].imports)a._import_name_to_package_name.set(t,e)}))}(o.indexURL),l=h(o.indexURL,"pyodide_py.tar");var g;c(o.stdin,o.stdout,o.stderr),g=o.homedir,i.preRun.push((function(){try{i.FS.mkdirTree(g)}catch(e){console.error(`Error occurred while making a home directory '${g}':`),console.error(e),console.error("Using '/' for a home directory instead"),g="/"}i.ENV.HOME=g,i.FS.chdir(g)}));let m=new Promise((e=>i.postRun=e));i.locateFile=e=>o.indexURL+e;const v=`${o.indexURL}pyodide.asm.js`;yield _(v),yield _createPyodideModule(i),yield m,i.locateFile=e=>{throw new Error("Didn't expect to load any more file_packager files!")},function(e){let t=i.FS.open("/pyodide_py.tar","w");i.FS.write(t,e,0,e.byteLength,void 0,!0),i.FS.close(t);const r=i.stringToNewUTF8('\nfrom sys import version_info\npyversion = f"python{version_info.major}.{version_info.minor}"\nimport shutil\nshutil.unpack_archive("/pyodide_py.tar", f"/lib/{pyversion}/site-packages/")\ndel shutil\nimport importlib\nimportlib.invalidate_caches()\ndel importlib\n    ');if(i._PyRun_SimpleString(r))throw new Error("OOPS!");i._free(r),i.FS.unlink("/pyodide_py.tar")}(yield l),i._pyodide_init();let w=me(o);return yield s,o.fullStdLib&&(yield G(["distutils"])),w.runPython("print('Python initialization complete')"),w}))}a.saveState=()=>a.pyodide_py._state.save_state(),a.restoreState=e=>a.pyodide_py._state.restore_state(e),a.runPythonInternal=function(e){return a._pyodide._base.eval_code(e,de)},globalThis.loadPyodide=ve,e.loadPyodide=ve,Object.defineProperty(e,"__esModule",{value:!0})}));